@app.get("/books/search")
async def get_book_by(title: str | None = None, author: str | None = None):
    list = []
    if title:
        for book in books_db:
            if title in book.title:
                list.append(book)
    if author:
        for book in books_db:
            if author in book.author:
                list.append(book)
    return list


    '''
@app.get("/books/searchv2")
async def get_book_by(title: str | None = None, author: str | None = None):
    cur = connection.cursor()
    cur.execute("SELECT * FROM book WHERE title LIKE %(title)s ", {'title': title})
    getBook = cur.fetchall()
    cur.close()
    return getBook'''


'''user = "postgres"
password = "toor"
database = "library"
server = "localhost"
port = "5432"

db_url = f"postgresql+psycopg2://{user}:{password}@{server}:{port}/{database}"

engine = db.create_engine(db_url)



connection = engine.connect()
metadata = db.MetaData()
book = db.Table('book', metadata, autoload=True, autoload_with=engine)
'''


@app.get("/books/{isbn}")
async def get_book_by_isbn(isbn: int):
    book_list = []
    for book in books_db:
        if book.isbn == isbn:
            book_list.append(book)
    return book_list



    @app.delete("/books/{isbn}")
async def delete_book_by_isbn(isbn: str):
    cur = connection.cursor()
    cur.execute("DELETE FROM book WHERE isbn = %(isbn)s", {'isbn': isbn})
    connection.commit()
    cur.close()
    return

                cur = self.connection.cursor()
            cur.execute("SELECT * FROM books")
            results = cur.fetchall()
            cur.close